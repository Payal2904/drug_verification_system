{"ast":null,"code":"// Drug API Service - Real API Integration\n// Uses OpenFDA API and other public drug databases\n\nclass DrugApiService {\n  constructor() {\n    this.openFdaBaseUrl = 'https://api.fda.gov/drug';\n    this.backupData = this.getBackupData();\n  }\n\n  // Backup data for when API fails or for testing\n  getBackupData() {\n    return [{\n      id: 1,\n      name: 'Paracetamol',\n      drugCode: 'PARA500',\n      batchNumber: 'BATCH001',\n      manufacturer: 'Pharma Corp',\n      expiryDate: '2025-12-31',\n      qrCode: 'QR001PARA500BATCH001',\n      barcode: '123456789012',\n      strength: '500mg',\n      isActive: true,\n      supplyChain: [{\n        entity: 'Pharma Corp',\n        type: 'manufacturer',\n        date: '2024-01-15',\n        location: 'Mumbai, India'\n      }, {\n        entity: 'MediDistrib',\n        type: 'distributor',\n        date: '2024-01-20',\n        location: 'Delhi, India'\n      }, {\n        entity: 'City Pharmacy',\n        type: 'retailer',\n        date: '2024-01-25',\n        location: 'Bangalore, India'\n      }]\n    }, {\n      id: 2,\n      name: 'Amoxicillin',\n      drugCode: 'AMOX250',\n      batchNumber: 'BATCH002',\n      manufacturer: 'MediCare Inc',\n      expiryDate: '2025-06-30',\n      qrCode: 'QR002AMOX250BATCH002',\n      barcode: '234567890123',\n      strength: '250mg',\n      isActive: true,\n      supplyChain: [{\n        entity: 'MediCare Inc',\n        type: 'manufacturer',\n        date: '2024-02-01',\n        location: 'Hyderabad, India'\n      }, {\n        entity: 'HealthDistrib',\n        type: 'distributor',\n        date: '2024-02-05',\n        location: 'Chennai, India'\n      }, {\n        entity: 'Metro Pharmacy',\n        type: 'retailer',\n        date: '2024-02-10',\n        location: 'Pune, India'\n      }]\n    }, {\n      id: 3,\n      name: 'Lisinopril',\n      drugCode: 'LISI10',\n      batchNumber: 'BATCH003',\n      manufacturer: 'GlobalMed Ltd',\n      expiryDate: '2025-09-15',\n      qrCode: 'QR003LISI10BATCH003',\n      barcode: '345678901234',\n      strength: '10mg',\n      isActive: true,\n      supplyChain: [{\n        entity: 'GlobalMed Ltd',\n        type: 'manufacturer',\n        date: '2024-01-20',\n        location: 'Kolkata, India'\n      }, {\n        entity: 'MedSupply Co',\n        type: 'distributor',\n        date: '2024-01-25',\n        location: 'Ahmedabad, India'\n      }, {\n        entity: 'Family Pharmacy',\n        type: 'retailer',\n        date: '2024-01-30',\n        location: 'Jaipur, India'\n      }]\n    }];\n  }\n\n  // Verify drug using multiple methods\n  async verifyDrug(searchData) {\n    console.log('üîç DrugApiService: Verifying drug with:', searchData);\n    try {\n      // First, try to find in backup/local data (for demo purposes)\n      const localResult = this.findInLocalData(searchData);\n      if (localResult) {\n        console.log('‚úÖ Found in local database:', localResult.name);\n        return this.formatVerificationResult(localResult, 'authentic');\n      }\n\n      // If not found locally and we have enough info, try OpenFDA API\n      if (searchData.drugName || searchData.drugCode) {\n        console.log('üåê Trying OpenFDA API...');\n        const apiResult = await this.searchOpenFDA(searchData);\n        if (apiResult) {\n          console.log('‚úÖ Found via OpenFDA API');\n          return this.formatVerificationResult(apiResult, 'authentic');\n        }\n      }\n\n      // Not found anywhere\n      console.log('‚ùå Drug not found in any database');\n      return {\n        success: true,\n        result: 'not_found',\n        message: `Drug not found in database. Code: ${searchData.qrCode || searchData.barcode || 'Unknown'}`,\n        authenticity_score: 10,\n        risk_factors: ['Drug not found in official database', 'May be counterfeit or unregistered']\n      };\n    } catch (error) {\n      console.error('‚ùå Verification error:', error);\n      return {\n        success: false,\n        result: 'error',\n        message: 'Verification system error. Please try again.',\n        authenticity_score: 0,\n        risk_factors: ['System error during verification']\n      };\n    }\n  }\n\n  // Find drug in local/backup data\n  findInLocalData(searchData) {\n    const drugs = this.backupData;\n    let drug = null;\n    if (searchData.qrCode) {\n      drug = drugs.find(d => d.qrCode === searchData.qrCode);\n      console.log('üîç Searching by QR code:', searchData.qrCode, '‚Üí', drug ? 'Found' : 'Not found');\n    } else if (searchData.barcode) {\n      drug = drugs.find(d => d.barcode === searchData.barcode);\n      console.log('üîç Searching by barcode:', searchData.barcode, '‚Üí', drug ? 'Found' : 'Not found');\n    } else if (searchData.batchNumber && searchData.drugCode) {\n      drug = drugs.find(d => d.batchNumber === searchData.batchNumber && d.drugCode === searchData.drugCode);\n      console.log('üîç Searching by batch + code:', searchData.batchNumber, searchData.drugCode, '‚Üí', drug ? 'Found' : 'Not found');\n    }\n    return drug;\n  }\n\n  // Search OpenFDA API\n  async searchOpenFDA(searchData) {\n    try {\n      // OpenFDA doesn't directly support barcode/QR lookup\n      // We'll search by drug name or code if available\n      let searchTerm = searchData.drugName || searchData.drugCode || '';\n      if (!searchTerm) {\n        return null;\n      }\n      const url = `${this.openFdaBaseUrl}/label.json?search=openfda.brand_name:\"${searchTerm}\"&limit=1`;\n      const response = await fetch(url);\n      if (!response.ok) {\n        console.log('‚ö†Ô∏è OpenFDA API returned:', response.status);\n        return null;\n      }\n      const data = await response.json();\n      if (data.results && data.results.length > 0) {\n        var _fdaResult$openfda$br, _fdaResult$openfda$ma, _fdaResult$openfda$su, _fdaResult$openfda$ma2;\n        const fdaResult = data.results[0];\n\n        // Convert FDA data to our format\n        return {\n          name: ((_fdaResult$openfda$br = fdaResult.openfda.brand_name) === null || _fdaResult$openfda$br === void 0 ? void 0 : _fdaResult$openfda$br[0]) || searchTerm,\n          manufacturer: ((_fdaResult$openfda$ma = fdaResult.openfda.manufacturer_name) === null || _fdaResult$openfda$ma === void 0 ? void 0 : _fdaResult$openfda$ma[0]) || 'Unknown',\n          drugCode: searchData.drugCode || 'N/A',\n          batchNumber: searchData.batchNumber || 'N/A',\n          barcode: searchData.barcode || 'N/A',\n          qrCode: searchData.qrCode || 'N/A',\n          expiryDate: 'N/A',\n          strength: ((_fdaResult$openfda$su = fdaResult.openfda.substance_name) === null || _fdaResult$openfda$su === void 0 ? void 0 : _fdaResult$openfda$su[0]) || 'N/A',\n          isActive: true,\n          supplyChain: [{\n            entity: ((_fdaResult$openfda$ma2 = fdaResult.openfda.manufacturer_name) === null || _fdaResult$openfda$ma2 === void 0 ? void 0 : _fdaResult$openfda$ma2[0]) || 'FDA Registered',\n            type: 'manufacturer',\n            date: new Date().toISOString().split('T')[0],\n            location: 'USA'\n          }],\n          source: 'OpenFDA'\n        };\n      }\n      return null;\n    } catch (error) {\n      console.error('‚ö†Ô∏è OpenFDA API error:', error);\n      return null;\n    }\n  }\n\n  // Format verification result\n  formatVerificationResult(drug, status = 'authentic') {\n    // Check expiry if available\n    let isExpired = false;\n    if (drug.expiryDate && drug.expiryDate !== 'N/A') {\n      const expiryDate = new Date(drug.expiryDate);\n      const currentDate = new Date();\n      isExpired = expiryDate < currentDate;\n    }\n    const result = isExpired ? 'expired' : status;\n    const score = isExpired ? 60 : status === 'authentic' ? 95 : 10;\n    const riskFactors = [];\n    if (isExpired) {\n      riskFactors.push('Drug is expired');\n    }\n    if (drug.source === 'OpenFDA') {\n      riskFactors.push('Verified via FDA database');\n    }\n    return {\n      success: true,\n      result: result,\n      drug: drug,\n      supplyChain: drug.supplyChain || [],\n      authenticity_score: score,\n      risk_factors: riskFactors\n    };\n  }\n\n  // Get all drugs (for admin panel)\n  async getAllDrugs() {\n    return this.backupData;\n  }\n}\nexport default new DrugApiService();","map":{"version":3,"names":["DrugApiService","constructor","openFdaBaseUrl","backupData","getBackupData","id","name","drugCode","batchNumber","manufacturer","expiryDate","qrCode","barcode","strength","isActive","supplyChain","entity","type","date","location","verifyDrug","searchData","console","log","localResult","findInLocalData","formatVerificationResult","drugName","apiResult","searchOpenFDA","success","result","message","authenticity_score","risk_factors","error","drugs","drug","find","d","searchTerm","url","response","fetch","ok","status","data","json","results","length","_fdaResult$openfda$br","_fdaResult$openfda$ma","_fdaResult$openfda$su","_fdaResult$openfda$ma2","fdaResult","openfda","brand_name","manufacturer_name","substance_name","Date","toISOString","split","source","isExpired","currentDate","score","riskFactors","push","getAllDrugs"],"sources":["/Users/kritesh.yadav/Downloads/drug_verification_system-main/frontend/src/services/drugApiService.js"],"sourcesContent":["// Drug API Service - Real API Integration\n// Uses OpenFDA API and other public drug databases\n\nclass DrugApiService {\n  constructor() {\n    this.openFdaBaseUrl = 'https://api.fda.gov/drug';\n    this.backupData = this.getBackupData();\n  }\n\n  // Backup data for when API fails or for testing\n  getBackupData() {\n    return [\n      {\n        id: 1,\n        name: 'Paracetamol',\n        drugCode: 'PARA500',\n        batchNumber: 'BATCH001',\n        manufacturer: 'Pharma Corp',\n        expiryDate: '2025-12-31',\n        qrCode: 'QR001PARA500BATCH001',\n        barcode: '123456789012',\n        strength: '500mg',\n        isActive: true,\n        supplyChain: [\n          { entity: 'Pharma Corp', type: 'manufacturer', date: '2024-01-15', location: 'Mumbai, India' },\n          { entity: 'MediDistrib', type: 'distributor', date: '2024-01-20', location: 'Delhi, India' },\n          { entity: 'City Pharmacy', type: 'retailer', date: '2024-01-25', location: 'Bangalore, India' }\n        ]\n      },\n      {\n        id: 2,\n        name: 'Amoxicillin',\n        drugCode: 'AMOX250',\n        batchNumber: 'BATCH002',\n        manufacturer: 'MediCare Inc',\n        expiryDate: '2025-06-30',\n        qrCode: 'QR002AMOX250BATCH002',\n        barcode: '234567890123',\n        strength: '250mg',\n        isActive: true,\n        supplyChain: [\n          { entity: 'MediCare Inc', type: 'manufacturer', date: '2024-02-01', location: 'Hyderabad, India' },\n          { entity: 'HealthDistrib', type: 'distributor', date: '2024-02-05', location: 'Chennai, India' },\n          { entity: 'Metro Pharmacy', type: 'retailer', date: '2024-02-10', location: 'Pune, India' }\n        ]\n      },\n      {\n        id: 3,\n        name: 'Lisinopril',\n        drugCode: 'LISI10',\n        batchNumber: 'BATCH003',\n        manufacturer: 'GlobalMed Ltd',\n        expiryDate: '2025-09-15',\n        qrCode: 'QR003LISI10BATCH003',\n        barcode: '345678901234',\n        strength: '10mg',\n        isActive: true,\n        supplyChain: [\n          { entity: 'GlobalMed Ltd', type: 'manufacturer', date: '2024-01-20', location: 'Kolkata, India' },\n          { entity: 'MedSupply Co', type: 'distributor', date: '2024-01-25', location: 'Ahmedabad, India' },\n          { entity: 'Family Pharmacy', type: 'retailer', date: '2024-01-30', location: 'Jaipur, India' }\n        ]\n      }\n    ];\n  }\n\n  // Verify drug using multiple methods\n  async verifyDrug(searchData) {\n    console.log('üîç DrugApiService: Verifying drug with:', searchData);\n\n    try {\n      // First, try to find in backup/local data (for demo purposes)\n      const localResult = this.findInLocalData(searchData);\n      \n      if (localResult) {\n        console.log('‚úÖ Found in local database:', localResult.name);\n        return this.formatVerificationResult(localResult, 'authentic');\n      }\n\n      // If not found locally and we have enough info, try OpenFDA API\n      if (searchData.drugName || searchData.drugCode) {\n        console.log('üåê Trying OpenFDA API...');\n        const apiResult = await this.searchOpenFDA(searchData);\n        \n        if (apiResult) {\n          console.log('‚úÖ Found via OpenFDA API');\n          return this.formatVerificationResult(apiResult, 'authentic');\n        }\n      }\n\n      // Not found anywhere\n      console.log('‚ùå Drug not found in any database');\n      return {\n        success: true,\n        result: 'not_found',\n        message: `Drug not found in database. Code: ${searchData.qrCode || searchData.barcode || 'Unknown'}`,\n        authenticity_score: 10,\n        risk_factors: ['Drug not found in official database', 'May be counterfeit or unregistered']\n      };\n\n    } catch (error) {\n      console.error('‚ùå Verification error:', error);\n      return {\n        success: false,\n        result: 'error',\n        message: 'Verification system error. Please try again.',\n        authenticity_score: 0,\n        risk_factors: ['System error during verification']\n      };\n    }\n  }\n\n  // Find drug in local/backup data\n  findInLocalData(searchData) {\n    const drugs = this.backupData;\n    let drug = null;\n\n    if (searchData.qrCode) {\n      drug = drugs.find(d => d.qrCode === searchData.qrCode);\n      console.log('üîç Searching by QR code:', searchData.qrCode, '‚Üí', drug ? 'Found' : 'Not found');\n    } else if (searchData.barcode) {\n      drug = drugs.find(d => d.barcode === searchData.barcode);\n      console.log('üîç Searching by barcode:', searchData.barcode, '‚Üí', drug ? 'Found' : 'Not found');\n    } else if (searchData.batchNumber && searchData.drugCode) {\n      drug = drugs.find(d =>\n        d.batchNumber === searchData.batchNumber && d.drugCode === searchData.drugCode\n      );\n      console.log('üîç Searching by batch + code:', searchData.batchNumber, searchData.drugCode, '‚Üí', drug ? 'Found' : 'Not found');\n    }\n\n    return drug;\n  }\n\n  // Search OpenFDA API\n  async searchOpenFDA(searchData) {\n    try {\n      // OpenFDA doesn't directly support barcode/QR lookup\n      // We'll search by drug name or code if available\n      let searchTerm = searchData.drugName || searchData.drugCode || '';\n      \n      if (!searchTerm) {\n        return null;\n      }\n\n      const url = `${this.openFdaBaseUrl}/label.json?search=openfda.brand_name:\"${searchTerm}\"&limit=1`;\n      \n      const response = await fetch(url);\n      \n      if (!response.ok) {\n        console.log('‚ö†Ô∏è OpenFDA API returned:', response.status);\n        return null;\n      }\n\n      const data = await response.json();\n      \n      if (data.results && data.results.length > 0) {\n        const fdaResult = data.results[0];\n        \n        // Convert FDA data to our format\n        return {\n          name: fdaResult.openfda.brand_name?.[0] || searchTerm,\n          manufacturer: fdaResult.openfda.manufacturer_name?.[0] || 'Unknown',\n          drugCode: searchData.drugCode || 'N/A',\n          batchNumber: searchData.batchNumber || 'N/A',\n          barcode: searchData.barcode || 'N/A',\n          qrCode: searchData.qrCode || 'N/A',\n          expiryDate: 'N/A',\n          strength: fdaResult.openfda.substance_name?.[0] || 'N/A',\n          isActive: true,\n          supplyChain: [\n            { entity: fdaResult.openfda.manufacturer_name?.[0] || 'FDA Registered', type: 'manufacturer', date: new Date().toISOString().split('T')[0], location: 'USA' }\n          ],\n          source: 'OpenFDA'\n        };\n      }\n\n      return null;\n    } catch (error) {\n      console.error('‚ö†Ô∏è OpenFDA API error:', error);\n      return null;\n    }\n  }\n\n  // Format verification result\n  formatVerificationResult(drug, status = 'authentic') {\n    // Check expiry if available\n    let isExpired = false;\n    if (drug.expiryDate && drug.expiryDate !== 'N/A') {\n      const expiryDate = new Date(drug.expiryDate);\n      const currentDate = new Date();\n      isExpired = expiryDate < currentDate;\n    }\n\n    const result = isExpired ? 'expired' : status;\n    const score = isExpired ? 60 : (status === 'authentic' ? 95 : 10);\n    const riskFactors = [];\n\n    if (isExpired) {\n      riskFactors.push('Drug is expired');\n    }\n    if (drug.source === 'OpenFDA') {\n      riskFactors.push('Verified via FDA database');\n    }\n\n    return {\n      success: true,\n      result: result,\n      drug: drug,\n      supplyChain: drug.supplyChain || [],\n      authenticity_score: score,\n      risk_factors: riskFactors\n    };\n  }\n\n  // Get all drugs (for admin panel)\n  async getAllDrugs() {\n    return this.backupData;\n  }\n}\n\nexport default new DrugApiService();\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}